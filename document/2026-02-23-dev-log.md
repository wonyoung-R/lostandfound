# 개발 로그 — 2026.02.23

## 프로젝트 개요

**LOST and FOUND** — 서울 기반 어반 에센셜 브랜드 웹사이트  
SS 2025 컬렉션 웨이트리스트 수집용 랜딩 페이지

- **URL**: https://wonyoung-r.github.io/lostandfound
- **GitHub**: https://github.com/wonyoung-R/lostandfound
- **Stack**: Next.js 16, Tailwind CSS, GitHub Pages

---

## 작업 내용

### 1. 이미지 경로 설정

**배경**  
`public/images/products/` 폴더 생성 후, 실제 상품 이미지 파일을 넣을 위치 안내.

**파일 구조**
```
public/images/products/
├── GR_front.jpg   # 그레이 후드 — 앞
├── GR_back.jpg    # 그레이 후드 — 뒤
├── GR_45.jpg      # 그레이 후드 — 45도
├── BK_front.jpg   # 블랙 후드 — 앞
├── BK_back.jpg    # 블랙 후드 — 뒤
├── BK_45.jpg      # 블랙 후드 — 45도
├── WH_front.jpg   # 화이트 후드 — 앞
├── WH_back.jpg    # 화이트 후드 — 뒤
└── WH_45.jpg      # 화이트 후드 — 45도
```

---

### 2. ProductSection 개편

**변경 전**: SVG로 그린 후드 플레이스홀더 (`HoodieVisual` 컴포넌트)

**변경 후**:
- 실제 이미지(`next/image`) 적용
- `FRONT / BACK / 45°` 버튼 클릭 시 이미지 전환 (fade 트랜지션)
- 상품 순서: **회색(GR) → 블랙(BK) → 흰색(WH)**
- 레이아웃: 3열 그리드 → **1열 세로 적층 (데스크탑: 이미지|텍스트 2단)**
- 짝수 상품은 이미지 왼쪽, 홀수는 이미지 오른쪽 (지그재그)

**관련 파일**: `components/sections/ProductSection.tsx`

---

### 3. 웨이트리스트 → Google Sheets 연동

**방식**: Google Apps Script 웹 앱을 웹훅으로 활용

**흐름**:
```
폼 제출 (클라이언트)
  → fetch POST → Google Apps Script URL
    → Google Sheets 행 추가 (제출일시, 이메일, 이름)
```

**Google Sheet**: https://docs.google.com/spreadsheets/d/1BdCBF9jLszUd24WGaM0fpblBk24M5nlIYQixeYmWksY

**Apps Script URL**:
```
https://script.google.com/macros/s/AKfycbwFrY9l6wm1W3MnSoKOV0n5sgYacmz1f2KXSwxkjwEVRyhF5XmV-Uf7OM77m-WxMG65Uw/exec
```

**Apps Script 코드** (`확장 프로그램 → Apps Script`):
```javascript
function doPost(e) {
  try {
    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    var data = JSON.parse(e.postData.contents);
    sheet.appendRow([new Date(), data.email, data.name || ""]);
    return ContentService
      .createTextOutput(JSON.stringify({ status: "success" }))
      .setMimeType(ContentService.MimeType.JSON);
  } catch (err) {
    return ContentService
      .createTextOutput(JSON.stringify({ status: "error", message: err.toString() }))
      .setMimeType(ContentService.MimeType.JSON);
  }
}
```

**환경변수** (`.env.local`):
```env
NEXT_PUBLIC_GOOGLE_APPS_SCRIPT_URL=https://script.google.com/macros/s/...
```

**주의**: GitHub Pages (static export)는 API Route를 지원하지 않으므로, 클라이언트에서 `mode: 'no-cors'`로 직접 호출.

**관련 파일**:
- `components/sections/WaitlistSection.tsx`
- `app/api/waitlist/route.ts` (로컬 개발용, 배포 시 미사용)

---

### 4. GitHub 레포 설정 및 초기 Push

- 레포: `wonyoung-R/lostandfound` (신규 생성)
- 기존 홈 디렉토리 git과 분리하여 독립 레포로 초기화
- `.gitignore`에 `.env*.local`, `.playwright-mcp/` 추가

---

### 5. GitHub Pages 배포 설정

**next.config.ts 수정**:
```ts
const isProd = process.env.NODE_ENV === "production";
const basePath = isProd ? "/lostandfound" : "";

const nextConfig = {
  output: "export",          // 정적 파일 빌드
  basePath,                  // /lostandfound 서브패스
  assetPrefix: isProd ? "/lostandfound/" : "",
  env: {
    NEXT_PUBLIC_BASE_PATH: basePath,  // 이미지 경로용
  },
  images: { unoptimized: true },
};
```

**GitHub Actions 워크플로우** (`.github/workflows/deploy.yml`):
- `main` 브랜치 push 시 자동 빌드 & 배포
- `npm ci --legacy-peer-deps` (eslint peer deps 충돌 대응)
- `out/.nojekyll` 생성 (Jekyll 빌드 우회)
- GitHub Secrets: `APPS_SCRIPT_URL` 등록 필요

**GitHub 레포 설정**:
- Settings → Pages → Source: **GitHub Actions** 선택

---

### 6. 트러블슈팅

| 이슈 | 원인 | 해결 |
|------|------|------|
| 배포 시 README만 표시 | Pages Source가 `branch`로 설정됨 | Settings → Pages → Source를 `GitHub Actions`로 변경 |
| `npm ci` 실패 | `eslint@^8` vs `eslint-config-next@16` 충돌 | `npm ci --legacy-peer-deps` 추가 |
| 이미지 404 | 파일 확장자 `.JPG`(대문자), Linux는 대소문자 구분 | `git mv`로 `.jpg` 소문자로 rename |
| 이미지 미표시 | `_next/` 폴더를 Jekyll이 무시 | `public/.nojekyll` 추가 |
| 이미지 경로 오류 | `next/image`가 static export에서 `basePath`를 src에 자동 적용 안 함 | `NEXT_PUBLIC_BASE_PATH` env로 수동 prefix 적용 |

---

## 현재 상태

- [x] 로컬 개발 서버 정상 (`http://localhost:3000`)
- [x] GitHub 레포 Push 완료
- [x] GitHub Pages 자동 배포 파이프라인 구성
- [x] 웨이트리스트 Google Sheets 연동
- [ ] 이미지 GitHub Pages 표시 확인 중 (마지막 빌드 배포 후 확인 필요)
